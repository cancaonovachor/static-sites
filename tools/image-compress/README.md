# 画像圧縮ツール

bg.pngの横幅を基準に、raw/ディレクトリ内の画像を縦横比を保持したまま積極的に圧縮してoutput/ディレクトリに保存するツールです。

## セットアップ

```bash
# 依存関係のインストール
uv sync
```

## 使い方

1. 基準となる画像を `bg.png` として配置
2. 圧縮したい画像を `raw/` ディレクトリに配置
3. ツールを実行

```bash
uv run main.py
```

4. 圧縮された画像が `output/` ディレクトリに生成されます

## 仕様

- **基準**: bg.pngの横幅を自動取得
- **縦横比**: 元画像の縦横比を保持
- **対応形式**: PNG, JPG, JPEG, WEBP, BMP
- **リサイズアルゴリズム**: LANCZOS (高品質)
- **JPEG品質**: 60 (デフォルト、高圧縮)
- **PNG変換**: PNGは自動的にJPEGに変換される
- **最適化**: JPEGの最適化を有効化

## 圧縮例

bg.pngが2000x1143の場合：
- 元画像: raw.png (3508x2481, 7.6MB)
- 出力: raw.jpg (2000x1414, 0.11MB)
- **圧縮率: 約98.5%**

## ディレクトリ構成

```
.
├── bg.png           # 基準となる画像（横幅の基準）
├── raw/             # 圧縮前の画像を配置
├── output/          # 圧縮後の画像が出力される
├── main.py          # メインスクリプト
└── pyproject.toml   # プロジェクト設定
```

## 注意事項

- 画像ファイルはgitリポジトリに含まれません（.gitignoreで除外）
- raw/とoutput/ディレクトリもgitに含まれません
- PNGは自動的にJPEGに変換されるため、透過情報は失われます
- JPEG品質60で高い圧縮率を実現していますが、画質は十分に保たれます
